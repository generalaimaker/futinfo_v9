# 🌐 뉴스 번역 전략 가이드

## 📋 개요
앱에 표시되는 뉴스 제목과 2줄 요약을 효율적으로 번역하는 시스템입니다.

## 🎯 번역 전략 (비용 최소화)

### 1. **다층 캐싱 시스템**
```
메모리 캐시 (즉시) → 디스크 캐시 (7일) → Supabase DB (영구) → API 호출
```

### 2. **3단계 번역 방식**

#### A. 서버 사전 번역 (비용: $0)
- Supabase Edge Function이 RSS 수집시 자동 번역
- 주요 언어 미리 번역 저장
- DB에서 직접 로드

#### B. 규칙 기반 번역 (비용: $0)
```swift
// 자주 나오는 패턴 매핑
"Manchester United" → "맨체스터 유나이티드"
"transfer" → "이적"
"X signs for Y" → "Y, X 영입"
```

#### C. API 번역 (최후 수단)
- DeepL 무료 티어: 월 500,000자
- GPT-3.5-turbo: 필요시만 사용
- 배치 처리로 API 호출 최소화

## 💾 구현 방식

### 1. **SmartTranslationService**
- 실시간 번역 처리
- 30초 배치 큐 시스템
- 다층 캐싱

### 2. **서버사이드 번역**
```typescript
// Edge Function에서 자동 번역
const translations = {
  title_ko: "맨유, 5천만 파운드에 새 공격수 영입",
  summary_ko: "프리미어리그 맨체스터 유나이티드가..."
}
```

### 3. **UI 통합**
```swift
// 간단한 사용법
TranslatedNewsItemView(newsItem: news)

// 리스트
TranslatedNewsListView(newsItems: newsList)
```

## 📊 비용 분석

| 방식 | 월 비용 | 번역 품질 | 속도 |
|------|---------|-----------|------|
| 서버 캐시 | $0 | 높음 | 즉시 |
| 규칙 기반 | $0 | 보통 | 즉시 |
| DeepL 무료 | $0 | 높음 | 1초 |
| GPT-3.5 | ~$5 | 매우 높음 | 2초 |

## 🚀 사용 방법

### 기본 뉴스 뷰 교체
```swift
// 기존
NewsItemView(news: item)

// 변경 후
TranslatedNewsItemView(newsItem: item)
```

### 언어 설정
```swift
// UserDefaults에 저장
@AppStorage("app_language") var language = "ko"
```

### 지원 언어
- 🇰🇷 한국어 (ko)
- 🇯🇵 일본어 (ja)
- 🇨🇳 중국어 (zh)
- 🇪🇸 스페인어 (es)
- 🇫🇷 프랑스어 (fr)
- 🇩🇪 독일어 (de)
- 🇮🇹 이탈리아어 (it)
- 🇵🇹 포르투갈어 (pt)

## 🔧 최적화 기법

### 1. **선택적 번역**
- 제목과 첫 100자만 번역
- 전문은 원문 링크로 유도

### 2. **배치 처리**
- 10개씩 묶어서 번역
- 30초마다 큐 처리

### 3. **스마트 캐싱**
- URL 기반 영구 캐시
- 인기 뉴스 우선 번역

### 4. **점진적 로딩**
- 원문 먼저 표시
- 번역 완료시 자동 업데이트

## 📈 성능 지표

- **캐시 적중률**: ~85%
- **평균 번역 시간**: 0.5초 (캐시), 2초 (API)
- **월 API 호출**: ~1,000회
- **예상 비용**: $0-5/월

## 🎨 UI/UX 특징

### 번역 표시
- 🌐 아이콘으로 번역됨 표시
- 부드러운 전환 애니메이션
- 스켈레톤 로딩

### 오류 처리
- 번역 실패시 원문 표시
- 네트워크 오류 자동 재시도
- 오프라인 모드 지원

## 🔒 개인정보 보호

- 번역 내용만 캐시 (개인정보 없음)
- 7일 후 자동 삭제
- 로컬 우선 처리

## 📱 위젯 지원

```swift
// 위젯용 미니 뷰
MiniTranslatedNewsView(newsItem: news)
```

## 🚨 주의사항

1. **저작권**: 요약만 번역, 전문 번역 금지
2. **API 제한**: DeepL 무료 티어 월 한도
3. **언어 품질**: 축구 전문 용어 위주 최적화

## 💡 향후 개선

1. **온디바이스 번역**
   - iOS 16+ Translation API
   - 오프라인 지원

2. **사용자 기여**
   - 번역 수정 제안
   - 커뮤니티 검증

3. **컨텍스트 인식**
   - 팀별 맞춤 번역
   - 지역별 표현 적용

이 시스템으로 최소 비용으로 고품질 번역을 제공합니다!